<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" xml:lang="en"><generator uri="https://jekyllrb.com/" version="4.3.4">Jekyll</generator><link href="https://mjalali.github.io/feed.xml" rel="self" type="application/atom+xml" /><link href="https://mjalali.github.io/" rel="alternate" type="text/html" hreflang="en" /><updated>2024-11-08T18:59:12+00:00</updated><id>https://mjalali.github.io/feed.xml</id><title type="html">blank</title><subtitle>A simple, whitespace theme for academics. Based on [*folio](https://github.com/bogoli/-folio) design.
</subtitle><entry><title type="html">Tips to use with Slurm and remote server!</title><link href="https://mjalali.github.io/blog/2024/working-with-slurm/" rel="alternate" type="text/html" title="Tips to use with Slurm and remote server!" /><published>2024-07-20T16:40:16+00:00</published><updated>2024-07-20T16:40:16+00:00</updated><id>https://mjalali.github.io/blog/2024/working-with-slurm</id><content type="html" xml:base="https://mjalali.github.io/blog/2024/working-with-slurm/"><![CDATA[<h3 id="outlines">Outlines:</h3>
<ul>
    <li>Adding your Public Key to the server</li>
    <li>Adding essential variables to ~/.bashrc</li>
    <li>Installing conda on Big data storage</li>
    <li>Changing the vscode installing path for extensions</li>
    <li>Scheduling a job with tmux and slurm</li>
</ul>

<h3 id="adding-your-public-key-to-the-server">Adding your Public Key to the server</h3>
<p>If you donâ€™t want to enter your password each time you connect to the server you can do the following steps:
follow <a href="https://linuxhandbook.com/add-ssh-public-key-to-server/">this link</a>.
(linux9 is an example)</p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ssh-keygen <span class="nt">-t</span> rsa
ssh-copy-id <span class="nt">-i</span> ~/.ssh/id_rsa.pub &lt;user_name&gt;@linux9
</code></pre></div></div>
<h3 id="adding-essential-variables-to-bashrc">Adding essential variables to ~/.bashrc</h3>
<p>You can add these variables to <code class="language-plaintext highlighter-rouge">~/.bashrc</code> to prevent exceeding the memory limit. 
<strong>Note</strong>: Remember to change <user_name> to your username!</user_name></p>
<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Torch and Python</span>
<span class="nb">export </span><span class="nv">TORCH_HOME</span><span class="o">=</span>/research/.../&lt;user_name&gt;/.cache/
<span class="nb">export </span><span class="nv">PIP_CACHE_DIR</span><span class="o">=</span>/research/.../&lt;user_name&gt;/.cache/
<span class="nb">export </span><span class="nv">PYTHONUSERBASE</span><span class="o">=</span>/research/.../&lt;user_name&gt;/.cache/python
<span class="nb">export </span><span class="nv">XDG_CACHE_HOME</span><span class="o">=</span>/research/.../&lt;user_name&gt;/.cache/

<span class="c"># Slurm Confs</span>
<span class="nb">export </span><span class="nv">SLURM_CONF</span><span class="o">=</span>/opt1/slurm/gpu-slurm.conf
</code></pre></div></div>
<h3 id="installing-conda-on-big-data-storage">Installing conda on Big data storage</h3>
<p>You need to install conda in order to work with different python versions on the server and the <code class="language-plaintext highlighter-rouge">~</code> directory space
is limited. You can follow <a href="https://docs.anaconda.com/miniconda/">this link</a></p>
<ol>
  <li>go to your big data storage directory (sth like <code class="language-plaintext highlighter-rouge">/research/d2/.../&lt;user_name&gt;</code>)</li>
  <li><code class="language-plaintext highlighter-rouge">mkdir -p /research/.../&lt;user_name&gt;/miniconda3</code></li>
  <li><code class="language-plaintext highlighter-rouge">wget https://repo.anaconda.com/miniconda/Miniconda3-latest-Linux-x86_64.sh -O /research/.../&lt;user_name&gt;/miniconda3/miniconda.sh</code></li>
  <li><code class="language-plaintext highlighter-rouge">bash /research/.../&lt;user_name&gt;/miniconda3/miniconda.sh</code></li>
  <li><code class="language-plaintext highlighter-rouge">rm -rf /research/.../&lt;user_name&gt;/miniconda3/miniconda.sh</code></li>
  <li><code class="language-plaintext highlighter-rouge">./miniconda3/bin/conda init bash</code></li>
</ol>

<h3 id="changing-the-vscode-installing-path-for-extensions">Changing the vscode installing path for extensions</h3>
<p>Due to the limited space in the home directory, if you want to install some VS code extensions, you need to change
the installing path.
You can see <a href="https://stackoverflow.com/questions/71063547/change-default-extensions-location-for-remote-development-in-vs-code">this link</a> for more information or just follow these steps:</p>
<ol>
  <li>Go to the settings</li>
  <li>Search <code class="language-plaintext highlighter-rouge">Remote.SSH: Server Install Path</code> in the settings.</li>
  <li>add the name of the server as the <code class="language-plaintext highlighter-rouge">key</code> and <code class="language-plaintext highlighter-rouge">/research/d2/rshr/&lt;user_name&gt;/</code> as the path. (For example)</li>
</ol>

<h3 id="scheduling-a-job-with-tmux-and-slurm">Scheduling a job with tmux and slurm</h3>
<ol>
  <li>First make a tmux session</li>
  <li>Allocate the gpu using slurm commands. (Follow <a href="https://i.cse.cuhk.edu.hk/technical/gpgpu-hpc-service/slurm/">this link</a>)</li>
  <li>Run your code!</li>
  <li>Detach from tmux using (cntrl + b + d)</li>
  <li>You can attach again using <code class="language-plaintext highlighter-rouge">tmux a</code> command.</li>
</ol>

<p><strong>If you had any question, you can just contact me!</strong></p>]]></content><author><name></name></author><category term="tips" /><category term="CUHK" /><category term="remote-server" /><category term="slurm" /><summary type="html"><![CDATA[This is my experience with working remote servers in the CSE department at the Chinese University of Hong Kong (CUHK).]]></summary></entry></feed>